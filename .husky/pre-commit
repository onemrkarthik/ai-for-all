echo "ğŸ” Running pre-commit checks..."

# Run lint-staged (ESLint on staged files)
echo "ğŸ“ Linting staged files..."
npx lint-staged

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Lint-staged failed. Please fix linting errors before committing."
  echo ""
  exit 1
fi

# Run standards check (fails only on ERRORS, not warnings)
echo "ğŸ“‹ Checking standards (errors only)..."
npm run check:standards --silent

if [ $? -ne 0 ]; then
  echo ""
  echo "âŒ Standards check found ERRORS. Please fix before committing."
  echo "   Run 'npm run check:standards' for details."
  echo ""
  exit 1
fi

echo "âœ… Pre-commit checks passed!"
